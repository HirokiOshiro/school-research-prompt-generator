<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="大学入試課職員向け - 海外高校調査用AIプロンプト生成ツール">
    <title>高校調査プロンプト生成ツール | School Research Prompt Generator</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="container">
        <header role="banner">
            <h1>🎓 高校調査プロンプト生成ツール</h1>
            <p class="subtitle">School Research Prompt Generator</p>
            <p class="subtitle-sub">for University Admissions Staff</p>
        </header>

        <main role="main">
            <!-- ガイドボタン行 -->
            <div class="guide-buttons-row">
                <!-- 利用ガイドセクション -->
                <section class="guide-section" id="guideSection">
                    <button type="button" class="guide-toggle" id="guideToggle" aria-expanded="false" aria-controls="guideContent">
                        <span class="guide-toggle-icon">📖</span>
                        <span class="guide-toggle-text">使い方 / How to Use</span>
                        <span class="guide-toggle-arrow" aria-hidden="true">▼</span>
                    </button>
                <div class="guide-content" id="guideContent" hidden>
                    <div class="guide-overview">
                        <h3>このツールとは？ / What is this tool?</h3>
                        <p class="bilingual-text">
                            <span class="ja">海外高校の調査をAIに依頼するための<strong>プロンプト（指示文）</strong>を自動生成します。</span>
                            <span class="en">Automatically generates <strong>prompts</strong> for AI to research international high schools.</span>
                        </p>
                    </div>
                    
                    <div class="guide-steps">
                        <h3>基本的な流れ / Basic Steps</h3>
                        <ol class="steps-list">
                            <li>
                                <span class="step-number">1</span>
                                <span class="step-text bilingual-inline">
                                    <span class="ja">調査したい<strong>高校名</strong>と<strong>国</strong>を入力</span>
                                    <span class="en">Enter <strong>school name</strong> and <strong>country</strong></span>
                                </span>
                            </li>
                            <li>
                                <span class="step-number">2</span>
                                <span class="step-text bilingual-inline">
                                    <span class="ja">必要に応じて詳細情報を選択</span>
                                    <span class="en">Add optional details if known</span>
                                </span>
                            </li>
                            <li>
                                <span class="step-number">3</span>
                                <span class="step-text bilingual-inline">
                                    <span class="ja">「<strong>プロンプト生成</strong>」ボタンをクリック</span>
                                    <span class="en">Click "<strong>Generate Prompt</strong>"</span>
                                </span>
                            </li>
                            <li>
                                <span class="step-number">4</span>
                                <span class="step-text bilingual-inline">
                                    <span class="ja">生成されたプロンプトを<strong>コピー</strong></span>
                                    <span class="en"><strong>Copy</strong> the generated prompt</span>
                                </span>
                            </li>
                            <li>
                                <span class="step-number">5</span>
                                <span class="step-text bilingual-inline">
                                    <span class="ja">Microsoft Copilotに貼り付けて<strong>実行</strong></span>
                                    <span class="en"><strong>Paste</strong> into Microsoft Copilot and run</span>
                                </span>
                            </li>
                        </ol>
                    </div>
                    
                    <div class="guide-note">
                        <p>⏱️ <strong>所要時間 / Time:</strong> 約1～2分 / About 1-2 minutes</p>
                        <p>💡 <strong>ヒント / Tip:</strong> 最低限「高校名」と「国」だけでOK / Only "School Name" and "Country" are required</p>
                    </div>
                </div>
            </section>

                <!-- セキュリティガイドボタン -->
                <button type="button" class="security-toggle" id="securityToggle" aria-label="セキュリティガイドを表示">
                    <span class="security-toggle-icon">🛡️</span>
                    <span class="security-toggle-text">セキュリティ</span>
                </button>
            </div>

            <!-- 重要な注意事項バナー -->
            <div class="important-notice-banner" role="note" id="noticeBanner">
                <div class="notice-icon">⚠️</div>
                <div class="notice-content">
                    <p class="notice-main">
                        <strong>重要 / Important:</strong>
                        AIの回答は必ず公式情報で裏付けを取ってください。
                        <span class="notice-en">Always verify AI responses with official sources.</span>
                    </p>
                </div>
                <button type="button" class="notice-expand-btn" id="noticeExpandBtn" aria-expanded="false" aria-controls="noticeExpandPanel" aria-label="詳細を表示 / Show details">
                    <span class="expand-icon">▼</span>
                </button>
                
                <!-- 展開パネル -->
                <div class="notice-expand-panel" id="noticeExpandPanel" hidden>
                    <div class="expand-panel-content">
                        <h4>✅ 確認チェックリスト / Verification Checklist</h4>
                        <ul class="expand-checklist">
                            <li>
                                <span class="check-icon">🔗</span>
                                <div>
                                    <strong>リンク先の確認 / Verify Links</strong><br>
                                    <span class="check-detail">AIが提示したリンク先にアクセスし、情報が正確か確認</span><br>
                                    <span class="hint-small">Access links provided by AI and confirm accuracy</span>
                                </div>
                            </li>
                            <li>
                                <span class="check-icon">📄</span>
                                <div>
                                    <strong>提出書類との照合 / Cross-check Documents</strong><br>
                                    <span class="check-detail">成績表・卒業証明書の学校名・住所等と一致しているか確認</span><br>
                                    <span class="hint-small">Verify school name, address match submitted documents</span>
                                </div>
                            </li>
                            <li>
                                <span class="check-icon">📖</span>
                                <div>
                                    <strong>業務マニュアルの参照 / Refer to Manual</strong><br>
                                    <span class="check-detail">最終判断は必ず業務マニュアルに従う</span><br>
                                    <span class="hint-small">Always follow work manual for final decisions</span>
                                </div>
                            </li>
                        </ul>
                        <div class="expand-warning">
                            <strong>⚠️</strong> AIの回答には誤りが含まれる場合があります。<br>
                            <span class="hint-small">AI responses may contain errors.</span>
                        </div>
                        <button type="button" class="notice-close-btn" id="noticeCloseBtn">
                            ✕ 閉じる / Close
                        </button>
                    </div>
                </div>
            </div>

            <form id="promptForm" novalidate>
                <!-- ステップインジケーター -->
                <div class="step-indicator" role="navigation" aria-label="入力ステップ / Input Steps">
                    <div class="step active" data-step="1">
                        <span class="step-dot">1</span>
                        <span class="step-label">基本情報<br><small>Basic</small></span>
                    </div>
                    <div class="step-line"></div>
                    <div class="step" data-step="2">
                        <span class="step-dot">2</span>
                        <span class="step-label">学校詳細<br><small>Details</small></span>
                    </div>
                    <div class="step-line"></div>
                    <div class="step" data-step="3">
                        <span class="step-dot">3</span>
                        <span class="step-label">調査設定<br><small>Settings</small></span>
                    </div>
                </div>

                <!-- 基本情報セクション -->
                <section class="form-section" data-section="1">
                    <h2>■ 基本情報 / Basic Information</h2>
                    
                    <div class="form-group">
                        <label for="schoolName">
                            高校名 / School Name <span class="required">*</span>
                            <button type="button" class="tooltip-btn" aria-label="高校名のヘルプ" data-tooltip="英語名がわかる場合は英語名を優先。/ Enter English name if known, or local language name.">
                                <span class="tooltip-icon">?</span>
                            </button>
                        </label>
                        <input type="text" id="schoolName" name="schoolName" 
                               placeholder="例 / e.g.: Beijing No. 4 High School / 北京市第四中学" 
                               required aria-required="true" aria-describedby="schoolNameHelp schoolNameError">
                        <span class="inline-error" id="schoolNameError" role="alert" aria-live="polite"></span>
                        <small id="schoolNameHelp">英語名または現地語名を入力 / Enter in English or local language</small>
                    </div>

                    <div class="form-group">
                        <label for="country">
                            所在国 / Country <span class="required">*</span>
                            <button type="button" class="tooltip-btn" aria-label="所在国のヘルプ" data-tooltip="国を選択すると、その国の教育制度に特化したプロンプトが生成されます。/ Selecting a country generates a prompt tailored to that country's education system.">
                                <span class="tooltip-icon">?</span>
                            </button>
                        </label>
                        <select id="country" name="country" required aria-required="true" aria-describedby="countryError">
                            <option value="">-- 選択 / Select --</option>
                            <option value="China">中国 (China)</option>
                            <option value="Korea">韓国 (South Korea)</option>
                            <option value="Vietnam">ベトナム (Vietnam)</option>
                            <option value="Taiwan">台湾 (Taiwan)</option>
                            <option value="Thailand">タイ (Thailand)</option>
                            <option value="Indonesia">インドネシア (Indonesia)</option>
                            <option value="Malaysia">マレーシア (Malaysia)</option>
                            <option value="Philippines">フィリピン (Philippines)</option>
                            <option value="India">インド (India)</option>
                            <option value="Japan">日本 (Japan)</option>
                            <option value="Other">その他 (Other)</option>
                        </select>
                        <span class="inline-error" id="countryError" role="alert" aria-live="polite"></span>
                    </div>

                    <div class="form-group" id="otherCountryGroup" style="display: none;">
                        <label for="otherCountry">その他の国名 / Other Country Name <span class="required">*</span></label>
                        <input type="text" id="otherCountry" name="otherCountry" 
                               placeholder="例 / e.g.: Singapore" aria-describedby="otherCountryError">
                        <span class="inline-error" id="otherCountryError" role="alert" aria-live="polite"></span>
                    </div>

                    <!-- 国別警告表示エリア -->
                    <div class="country-warning" id="countryWarning" style="display: none;" role="alert">
                        <div class="country-warning-header">
                            <span class="warning-icon">⚠️</span>
                            <span class="warning-title" id="countryWarningTitle">重要な注意点 / Important Notes</span>
                        </div>
                        <ul class="country-warning-list" id="countryWarningList"></ul>
                    </div>

                    <div class="form-group">
                        <label for="cityState">
                            都市/州 / City/State <span class="optional">任意/Optional</span>
                            <button type="button" class="tooltip-btn" aria-label="都市/州のヘルプ" data-tooltip="入力するとより精度の高い検索が可能。/ Helps narrow down the search. Leave blank if unknown.">
                                <span class="tooltip-icon">?</span>
                            </button>
                        </label>
                        <input type="text" id="cityState" name="cityState" 
                               placeholder="例 / e.g.: Beijing / Seoul / Ho Chi Minh City">
                    </div>
                </section>

                <!-- 学校詳細セクション -->
                <section class="form-section" data-section="2">
                    <h2>■ 学校詳細 / School Details <span class="section-note">(わかる範囲で / if known)</span></h2>

                    <div class="form-group">
                        <label for="schoolType">
                            学校種別 / School Type
                            <button type="button" class="tooltip-btn" aria-label="学校種別のヘルプ" data-tooltip="Public/Private/International. Leave unselected if unknown.">
                                <span class="tooltip-icon">?</span>
                            </button>
                        </label>
                        <select id="schoolType" name="schoolType">
                            <option value="">-- 不明 / Unknown --</option>
                            <option value="Public">公立 (Public)</option>
                            <option value="Private">私立 (Private)</option>
                            <option value="International">インターナショナル (International)</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>
                            カリキュラム / Curriculum <span class="optional">複数選択可 / Multiple OK</span>
                            <button type="button" class="tooltip-btn" aria-label="カリキュラムのヘルプ" data-tooltip="IB=International Baccalaureate, A-Level=British, AP=American. Important for international schools.">
                                <span class="tooltip-icon">?</span>
                            </button>
                        </label>
                        <div class="checkbox-group">
                            <label class="checkbox-label">
                                <input type="checkbox" name="curriculum" value="IB"> IB (国際バカロレア)
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" name="curriculum" value="A-Level"> A-Level
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" name="curriculum" value="AP"> AP (Advanced Placement)
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" name="curriculum" value="National"> 国内課程 (National)
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" name="curriculum" value="Unknown"> 不明 (Unknown)
                            </label>
                        </div>
                    </div>
                </section>

                <!-- 調査設定セクション -->
                <section class="form-section" data-section="3">
                    <h2>■ 調査設定 / Research Settings</h2>

                    <div class="form-group">
                        <label id="purposeLabel">
                            調査目的 / Purpose <span class="required">*</span>
                            <button type="button" class="tooltip-btn" aria-label="調査目的のヘルプ" data-tooltip="New Registration = first time research / Update = refresh existing data / Verification = check eligibility">
                                <span class="tooltip-icon">?</span>
                            </button>
                        </label>
                        <div class="radio-group" role="radiogroup" aria-labelledby="purposeLabel" aria-required="true" aria-describedby="purposeError">
                            <label class="radio-label">
                                <input type="radio" name="purpose" value="new" required> 新規登録 (New)
                            </label>
                            <label class="radio-label">
                                <input type="radio" name="purpose" value="update"> 情報更新 (Update)
                            </label>
                            <label class="radio-label">
                                <input type="radio" name="purpose" value="verify"> 資格確認 (Verify)
                            </label>
                        </div>
                        <span class="inline-error" id="purposeError" role="alert" aria-live="polite"></span>
                    </div>

                    <div class="form-group">
                        <label class="checkbox-label standalone">
                            <input type="checkbox" id="includeLocalSearch" name="includeLocalSearch">
                            現地語検索を含める / Include local language search
                        </label>
                        <small class="hint-bilingual">中国語、韓国語等での検索例を含む / Include search examples in Chinese, Korean, etc.</small>
                    </div>

                    <div class="form-group">
                        <label for="additionalUrls">追加URL / Additional URLs <span class="optional">任意 / Optional</span></label>
                        <input type="text" id="additionalUrls" name="additionalUrls" 
                               placeholder="e.g. https://example.com, https://school.edu" aria-describedby="additionalUrlsError additionalUrlsHelp">
                        <span class="inline-error" id="additionalUrlsError" role="alert" aria-live="polite"></span>
                        <small id="additionalUrlsHelp" class="hint-bilingual">確認したいURLをカンマ区切り / Comma-separated URLs to check</small>
                    </div>
                </section>

                <!-- ボタン -->
                <div class="button-group">
                    <button type="submit" class="btn btn-primary" id="generateBtn" aria-describedby="generateHelp">
                        <span class="btn-text">生成 / Generate</span>
                        <span class="btn-loading" style="display: none;">
                            <span class="spinner"></span> Generating...
                        </span>
                    </button>
                    <button type="reset" class="btn btn-secondary" id="resetBtn">
                        リセット / Reset
                    </button>
                </div>
                <p id="generateHelp" class="visually-hidden">Fill the form and click this button to generate an AI prompt</p>
            </form>

            <!-- 出力セクション -->
            <section class="output-section" id="outputSection" style="display: none;" aria-live="polite">
                <div class="output-header">
                    <h2>■ 生成されたプロンプト / Generated Prompt</h2>
                    <button type="button" class="btn btn-copy" id="copyBtn" aria-label="Copy prompt to clipboard">
                        📋 Copy
                    </button>
                </div>
                <div class="output-container">
                    <pre id="outputPrompt" tabindex="0" aria-label="Generated prompt"></pre>
                </div>
                <div class="copy-feedback" id="copyFeedback" role="status" aria-live="polite">
                    ✓ Copied to clipboard
                </div>
                
                <!-- 次のステップガイド -->
                <div class="next-steps-guide">
                    <h3>🚀 Next Steps / 次のステップ</h3>
                    <ol class="next-steps-list">
                        <li>
                            <span class="step-icon">📋</span>
                            <span>Click "<strong>Copy</strong>" to copy the prompt<br><span class="hint-small">プロンプトをコピー</span></span>
                        </li>
                        <li>
                            <span class="step-icon">💻</span>
                            <span>Open <a href="https://copilot.microsoft.com/" target="_blank" rel="noopener noreferrer">Microsoft Copilot</a><br><span class="hint-small">Copilotを開く</span></span>
                        </li>
                        <li>
                            <span class="step-icon">📨</span>
                            <span>Paste and send the prompt<br><span class="hint-small">プロンプトを貼り付けて送信</span></span>
                        </li>
                        <li>
                            <span class="step-icon">✅</span>
                            <span>Review the AI response and ask follow-up questions if needed<br><span class="hint-small">AIの回答を確認し、追加質問</span></span>
                        </li>
                    </ol>
                    <div class="next-steps-tip">
                        <strong>💡 Tip:</strong> If information is incomplete, ask "Tell me more about ○○" / 情報不足時は追加質問してください
                    </div>
                </div>
            </section>

            <!-- 確認モーダル -->
            <div class="modal-overlay" id="verificationModal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
                <div class="modal-content">
                    <div class="modal-header">
                        <h2 id="modalTitle">✅ 確認チェックリスト / Verification Checklist</h2>
                    </div>
                    <div class="modal-body">
                        <p class="modal-intro">
                            AIの回答を業務に使用する前に、以下を必ず確認してください。<br>
                            <span class="hint-small">Before using AI responses for work, please verify the following:</span>
                        </p>
                        <ul class="modal-checklist">
                            <li>
                                <span class="check-icon">🔗</span>
                                <div class="check-content">
                                    <strong>リンク先の確認 / Verify Links</strong><br>
                                    <span class="check-detail">AIが提示したリンク先に実際にアクセスし、情報が正確か確認してください。</span><br>
                                    <span class="hint-small">Access the links provided by AI and confirm the information is accurate.</span>
                                </div>
                            </li>
                            <li>
                                <span class="check-icon">📄</span>
                                <div class="check-content">
                                    <strong>提出書類との照合 / Cross-check with Documents</strong><br>
                                    <span class="check-detail">志願者から提出された成績表・卒業（見込み）証明書の学校名・住所等と一致しているか確認してください。</span><br>
                                    <span class="hint-small">Verify that school name, address, etc. match the transcripts and certificates submitted by the applicant.</span>
                                </div>
                            </li>
                            <li>
                                <span class="check-icon">📖</span>
                                <div class="check-content">
                                    <strong>業務マニュアルの参照 / Refer to Work Manual</strong><br>
                                    <span class="check-detail">最終判断は必ず業務マニュアルに従って行ってください。</span><br>
                                    <span class="hint-small">Always follow the work manual for final decisions.</span>
                                </div>
                            </li>
                        </ul>
                        <div class="modal-warning">
                            <strong>⚠️ 注意 / Warning:</strong>
                            AIの回答には誤りが含まれる場合があります。公式情報での裏付けなく業務判断に使用しないでください。<br>
                            <span class="hint-small">AI responses may contain errors. Do not use for business decisions without verification from official sources.</span>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary modal-confirm" id="modalConfirmBtn">
                            確認しました / I Understand
                        </button>
                    </div>
                </div>
            </div>

            <!-- セキュリティガイドモーダル -->
            <div class="modal-overlay" id="securityModal" role="dialog" aria-modal="true" aria-labelledby="securityModalTitle">
                <div class="modal-content modal-content-large">
                    <div class="modal-header modal-header-security">
                        <h2 id="securityModalTitle">🛡️ セキュリティとデータ取り扱いガイド</h2>
                        <button type="button" class="modal-close-btn" id="securityModalClose" aria-label="閉じる">✕</button>
                    </div>
                    <div class="modal-body modal-body-scroll">
                        <p class="security-intro">本ツールを安心して利用するための、技術的な仕組みと運用上の留意点です。</p>

                        <section class="security-section">
                            <h3>1. データの安全性：なぜ情報は漏洩しないのか</h3>
                            <p>本ツールは、一般的なWebサービスとは異なり、<strong>「情報を外部に送信しない」</strong>設計になっています。</p>

                            <h4>① ブラウザ内完結型（クライアントサイド動作）</h4>
                            <p>通常、Webサービスは入力したデータをサーバーへ送信して処理しますが、本ツールはすべての処理を利用者のブラウザの中だけで実行します。</p>
                            <ul>
                                <li><strong>通信の不在:</strong> プログラム内には、外部へデータを送る命令（API通信等）が一切含まれていません。</li>
                                <li><strong>オフライン動作可能:</strong> ページを一度読み込んだ後は、インターネットを切断した状態でもプロンプトの生成が可能です。</li>
                            </ul>

                            <h4>② 入力情報の「非保存」</h4>
                            <p>本ツールにはデータベースや保存機能が存在しません。</p>
                            <ul>
                                <li><strong>メモリ上のみの処理:</strong> 入力した高校名や調査目的は、ブラウザのメモリ（一時的な記憶領域）にのみ保持されます。</li>
                                <li><strong>自動消去:</strong> ブラウザのタブを閉じる、またはページを再読み込みした瞬間に、入力したすべてのデータは完全に消去されます。</li>
                            </ul>

                            <h4>③ サーバーサイド処理の排除</h4>
                            <p>本ツールは「GitHub Pages」という、プログラムを動かさない静的なファイルのみを配布する仕組みで公開されています。開発者側に入力内容が届く仕組み自体が存在しません。</p>
                        </section>

                        <section class="security-section">
                            <h3>2. 生成AI利用時のガイドライン（重要）</h3>
                            <p>本ツールは安全な「プロンプト（指示文）の作成場」ですが、生成された内容を<strong>実際に生成AI（Microsoft Copilot等）へ投入する際</strong>には、以下の点に留意してください。</p>

                            <h4>① AIサービス側の規約遵守</h4>
                            <p>プロンプトをコピーしてAIに貼り付ける際は、所属組織（大学等）が定めている生成AI利用ガイドラインを必ず遵守してください。</p>
                            <ul>
                                <li>組織外秘の情報や、特定の個人を識別できる情報の取り扱いに注意してください。</li>
                            </ul>

                            <h4>② 「個人情報」の入力に関する推奨事項</h4>
                            <ul>
                                <li><strong>志願者氏名は入力しない:</strong> 志願者個人の名前などは入力項目にありませんが、備考欄等にも記載しないようにしてください。</li>
                                <li><strong>抽象化して入力:</strong> 「特定の個人の状況」ではなく、「特定の高校の教育制度」を調べるためのツールとして活用してください。</li>
                            </ul>

                            <h4>③ 回答の真偽確認（ファクトチェック）</h4>
                            <p>生成AIは、時として事実とは異なる回答（ハルシネーション）を生成することがあります。</p>
                            <ul>
                                <li>AIが提示したURLには必ず自身でアクセスし、一次情報の有無を確認してください。</li>
                                <li>最終的な判断は、必ず公式の募集要項や業務マニュアルに基づいて行ってください。</li>
                            </ul>
                        </section>

                        <section class="security-section">
                            <h3>3. 技術担当者によるチェック結果</h3>
                            <p>本ツールのソースコードを解析した結果、以下の安全性が確認されています。</p>

                            <table class="security-check-table">
                                <thead>
                                    <tr>
                                        <th>チェック項目</th>
                                        <th>ステータス</th>
                                        <th>詳細</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>外部通信の有無</td>
                                        <td class="status-safe">❌ なし</td>
                                        <td>fetch等の通信命令は含まれていません</td>
                                    </tr>
                                    <tr>
                                        <td>クッキーの利用</td>
                                        <td class="status-safe">❌ なし</td>
                                        <td>利用者を追跡するCookieは使用していません</td>
                                    </tr>
                                    <tr>
                                        <td>ログの収集</td>
                                        <td class="status-safe">❌ なし</td>
                                        <td>入力履歴や利用統計の収集は行っていません</td>
                                    </tr>
                                    <tr>
                                        <td>ソースの透明性</td>
                                        <td class="status-good">✅ あり</td>
                                        <td>すべての動作プログラムが公開されており、検証可能です</td>
                                    </tr>
                                </tbody>
                            </table>
                        </section>

                        <div class="security-contact">
                            <strong>本ツールに関しての問い合わせ：</strong> 大城
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary" id="securityModalConfirm">
                            閉じる / Close
                        </button>
                    </div>
                </div>
            </div>
        </main>

        <footer role="contentinfo">
            <p>School Research Prompt Generator v2.0 | All 10 Countries Supported</p>
        </footer>
    </div>

    <script src="js/country-data.js"></script>
    <script src="js/prompt-builder.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
